<Page x:Class="Dormitory_Management.View.RoomPayment"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:Dormitory_Management.View"
      mc:Ignorable="d" d:DesignWidth="900"
      Title="RoomPayment" Height="1090">

    <Grid Background="#f0f2f5" Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="20"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Left Column: Room Payment Form -->
        <Border Background="White" CornerRadius="15" Padding="20" Grid.Column="0">
            <StackPanel>
                <!-- Tiêu đề -->
                <TextBlock Text="Room Payment" FontSize="22" FontWeight="Bold" Foreground="#1a73e8" HorizontalAlignment="Center" Margin="0,0,0,25"/>

                <!-- Nhập số điện thoại -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,10">
                    <TextBlock Text="Phone Number:" VerticalAlignment="Center" Margin="0,5" Width="120" Foreground="#5f6368" FontWeight="SemiBold"/>
                    <TextBox x:Name="PhoneTextBox" Height="35" Width="250" BorderBrush="#dadce0" BorderThickness="1" Padding="10,5"/>
                </StackPanel>

                <!-- Nút tìm kiếm -->
                <Border Background="#1a73e8" CornerRadius="5" Width="120" Height="35" HorizontalAlignment="Center" Margin="0,15,0,20">
                    <Button Content="Search" Width="120" Height="35" Background="Transparent" Foreground="White" BorderThickness="0" FontWeight="SemiBold" Click="SearchStudent_Click"/>
                </Border>

                <!-- Hiển thị tên sinh viên -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,10">
                    <TextBlock Text="Student Name:" VerticalAlignment="Center" Margin="0,5" Width="120" Foreground="#5f6368" FontWeight="SemiBold"/>
                    <TextBox x:Name="StudentNameTextBox" Margin="0,5,0,10" Height="35" IsReadOnly="True" Width="250" BorderBrush="#dadce0" BorderThickness="1" Padding="10,5"/>
                </StackPanel>

                <!-- Hiển thị email -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,10">
                    <TextBlock Text="Email ID:" VerticalAlignment="Center" Margin="0,5" Width="120" Foreground="#5f6368" FontWeight="SemiBold"/>
                    <TextBox x:Name="EmailTextBox" Margin="0,5,0,10" Height="35" IsReadOnly="True" Width="250" BorderBrush="#dadce0" BorderThickness="1" Padding="10,5"/>
                </StackPanel>

                <!-- Hiển thị số phòng -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,10">
                    <TextBlock Text="Room Number:" VerticalAlignment="Center" Margin="0,5" Width="120" Foreground="#5f6368" FontWeight="SemiBold"/>
                    <TextBox x:Name="RoomNumberTextBox" Margin="0,5,0,10" Height="35" IsReadOnly="True" Width="250" BorderBrush="#dadce0" BorderThickness="1" Padding="10,5"/>
                </StackPanel>

                <!-- Chọn ngày thanh toán -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,10">
                    <TextBlock Text="Select Payment Date:" VerticalAlignment="Center" Margin="0,5" Width="120" Foreground="#5f6368" FontWeight="SemiBold"/>
                    <DatePicker x:Name="PaymentDatePicker" Margin="0,5,0,10" Height="35" Width="250"/>
                </StackPanel>

                <!-- Hiển thị số tiền phải trả -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,10">
                    <TextBlock Text="Amount to Pay:" VerticalAlignment="Center" Margin="0,5" Width="120" Foreground="#5f6368" FontWeight="SemiBold"/>
                    <TextBox x:Name="AmountTextBox" Margin="0,5,0,15" Height="35" Width="250" BorderBrush="#dadce0" BorderThickness="1" Padding="10,5"/>
                </StackPanel>

                <!-- Nút thanh toán, làm lại, và xem danh sách thanh toán -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,15,0,15">
                    <Border Background="#28a745" CornerRadius="5" Width="100" Height="35" Margin="5,0,5,0">
                        <Button Content="Pay" Width="100" Height="35" Background="Transparent" Foreground="White" BorderThickness="0" FontWeight="SemiBold" Click="PayButton_Click"/>
                    </Border>
                    <Border Background="#5f6368" CornerRadius="5" Width="100" Height="35" Margin="5,0,5,0">
                        <Button Content="Clear" Width="100" Height="35" Background="Transparent" Foreground="White" BorderThickness="0" FontWeight="SemiBold" Click="ClearButton_Click"/>
                    </Border>
                    <Border Background="#ffc107" CornerRadius="5" Width="100" Height="35" Margin="5,0,5,0">
                        <Button Content="Export" Width="100" Height="35" Background="Transparent" Foreground="White" BorderThickness="0" FontWeight="SemiBold" Click="btnExport_Click"/>
                    </Border>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Right Column: Payment Information Display -->
        <Border x:Name="PaymentInfoColumn" Background="White" CornerRadius="15" Padding="20" Grid.Column="2" Visibility="Visible">
            <StackPanel>
                <!-- Title -->
                <TextBlock Text="Payment Information" FontSize="22" FontWeight="Bold" Foreground="#1a73e8" HorizontalAlignment="Center" Margin="0,0,0,20"/>
                
                <!-- Payment List -->
                <DataGrid x:Name="PaymentDataGrid" 
                          Height="400" 
                          AutoGenerateColumns="False" 
                          BorderBrush="#dadce0" 
                          GridLinesVisibility="Horizontal" 
                          HeadersVisibility="Column"
                          IsReadOnly="True"
                          CanUserResizeColumns="True"
                          CanUserReorderColumns="True"
                          HorizontalScrollBarVisibility="Disabled">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Phone Number" Binding="{Binding MobileNo}" Width="*" />
                        <DataGridTextColumn Header="Month" Binding="{Binding Fmonth}" Width="*" />
                        <DataGridTextColumn Header="Amount" Binding="{Binding Amount}" Width="*" />
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Summary Information -->
                <StackPanel Margin="0,20,0,0">
                    <TextBlock Text="Payment Summary" FontSize="18" FontWeight="Bold" Foreground="#5f6368" HorizontalAlignment="Center" Margin="0,0,0,15"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Text="Total Payments:" Grid.Row="0" Grid.Column="0" Foreground="#5f6368" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                        <TextBlock x:Name="TotalPaymentsText" Text="0" Grid.Row="0" Grid.Column="1" Foreground="#1a73e8" FontWeight="Bold" HorizontalAlignment="Center"/>
                        
                        <TextBlock Text="Total Amount:" Grid.Row="1" Grid.Column="0" Foreground="#5f6368" FontWeight="SemiBold" HorizontalAlignment="Center" Margin="0,10,0,0"/>
                        <TextBlock x:Name="TotalAmountText" Text="$0" Grid.Row="1" Grid.Column="1" Foreground="#28a745" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,10,0,0"/>
                    </Grid>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</Page>
